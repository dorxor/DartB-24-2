1주차(SQL과 BigQuery 학습의 필요성 이해)

## 1-1. BigQuery 기초 지식
데이터베이스(데이터의 저장소) 내에 테이블이 존재!
→ 저장된 데이터를 제품(웹, 앱)에서 사용\
어떤 데이터베이스를 쓰는지는 회사마다 다름 (MySQL, Oracle 등)

✅ MySQL, Oracle, PostgreSQL 같은 데이터베이스의 특징 \
⇒ OLTP(Online Transaction Processing)\
호스트 컴퓨터와 온라인으로 접속된 여러 단말 간의 처리 형태의 하나. 
여러 단말에서 보내온 메시지에 따라 호스트 컴퓨터가 데이터 베이스를 액세스하고, **바로 처리 결과를 돌려보내는 형태**를 말한다. (=보류, 중간 상태가 없음) 데이터 베이스의 데이터를 수시로 갱신하는 프로세싱을 의미한다.\
데이터의 추가(INSERT), 데이터의 변경(UPDATE)이 많이 발생

SQL을 사용해 **데이터를 추출**할 수 있으나
분석 전용이 아니고 transaction을 위한 것! → 쿼리 속도가 느림

SQL : 데이터베이스에서 **데이터를 가지고 올 때 사용**하는 언어
데이터베이스의 데이터를 관리하기 위해 설계된 특수 목적의 프로그래밍 언어

*Raw데이터, row데이터 구분하도록!!

테이블에 저장된 형태 = 엑셀, 스프레드시트와 유사

✅ OLAP와 데이터 웨어하우스(DW)의 등장\
OLTP로 데이터 분석을 하다가 속도, 기능 부족의 이슈로 OLAP가 등장함\
OLAP : Online Analytical Processing
(분석을 위한 기능 제공)

데이터 웨어하우스
- Database, 웹(크롤링), 파일, API의 결과 등 데이터를 한 곳에 모아서 저장
- 여러 곳에 저장된 데이터 예시

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/5282671f-5ded-45ea-98ba-fcce7c2fb1f4/a63ee841-3b44-4eb8-87be-c499af25566c/image.png)

GoogleCloud의 OLAP + Data Warehouse


✅ BigQuery 장점

1. 난이도\
SQL을 사용해 쉽게 데이터 추출 가능
2. 속도\
OLAP 도구이므로 속도가 빠름(단, 그만큼 돈을 지불)
3. Firebase, Google Analytics 4의 데이터를 쉽게 추출할 수 있음\
사용 기기, 위치(시 단위까지 표현), OS 버전, 이벤트 행동 획득 가능(별도의 로깅 필요)\
→ 회사에서 앱이나 웹에서 Firebase, GA4를 활용할 경우 👍
4. 데이터 웨어하우스를 사용하기 위해 서버(컴퓨터)를 띄울 필요 없음\
구글에서 인프라를 관리함 (서버↔앱←고객)\
→ 운영을 적은 비용(인력 등)으로 진행하기 위해 빅쿼리 사용

+사용하는회사 : 쏘카, 당근, 컬리, 하이퍼커넥트, 마이리얼트립, 버드뷰, 원티드랩, 
매스프레소, 오피지지

✅ 빅쿼리 비용(US 기준)
- 쿼리 비용
    - On-demand 요금제 : 쿼리에서 처리된 용량만큼 부과(**1TB**에 $6.25)
    → 쿼리문을 잘 작성하는 게 중요!
    - Capacity 요금제 : Slot 단위로 요금 부과
    1 Slot 시간당 $0.04~0.06, 세부 요금제에 따라 다름
- 저장 비용 → 저장 비용은 용량마다
    - Active Logical 저장소 : 1G에 $0.02(월)
    - Long-term Logical 저장소 : 1G에 $0.01(월), 90일간 수정되지 않는 경우

## 1-2. BigQuery 환경 설정
✅ BigQuery의 환경 구성 요소

1. 프로젝트(Project)
- **하나의 큰 건물**. 건물 안에는 여러 목적을 가진 창고가 존재
- 하나의 프로젝트에 여러 데이터셋이 존재할 수 있음\
  (프로젝트를 2개(or 그 이상)로 운영하는 회사도 있음)
2. 데이터셋(Dataset)
- **프로젝트에 있는 창고**. 각 창고 공간에 데이터를 저장
- 판매 데이터, 고객 데이터 등 별도의 데이터를 저장할 수 있음
- 하나의 데이터셋에 다양한 테이블이 존재할 수 있음
3. 테이블(Table)
- **창고에 있는 선반**
- 테이블 안엔 상품의 세부 정보가 저장
- 테이블 안엔 행과 열로 이루어진 데이터들이 저장

프로젝트 > 대시보드 > 리소스 > 빅쿼리

테이블 생성할 때 스키마 > **자동 감지 체크**하기!!!\
스키마 자동 감지를 사용하지 않으면 필드 이름, 유형, 모드를 직접 설정할 수 있어.\
텍스트로 편집이 훨씬 편하다능,,\
쭉 내려서 고급 옵션 > 건너뛸 헤더 행 > 1(csv파일ㅇ 첫번째 행에 칼럼의 이름이 있기 때문)

**파티션**? 큰 테이블이나 인덱스를 더 작은, 관리하기 쉬운 부분으로 나누는 방법.\
데이터가 너무 커서 효율적인 쿼리나 관리가 어려울 때, 파티셔닝을 통해 성능을 개선하고 유지 관리를 용이하게 할 수 있다.
파티션 설정한 테이블의 아이콘이 다르다는 걸 알고 있자!

```
# 테이블 열고 상단 '쿼리' > 새 탭에서 열기
# SQL쿼리 초안 prototype (샘플 쿼리)
SELECT  FROM `inflearn-bigq.basic.pokemon` LIMIT 1000
```

## 2-1. 데이터 활용 Overview
task → 문제 정의(상호 배타적, 전체 포괄적) → 원하는 것 정의 → 데이터 탐색 → 조건(필터링)/추출/변환/요약 → **데이터 결과 검증**(예상한 것과 실제가 동일한가?) → 피드백/활용

## 2-2. 저장된 데이터 확인하기
✅ SQL 쿼리를 작성하기 전에 생각(or 확인)해보면 좋은 것
- 데이터가 어떻게 저장되어 있는가?
- 어떤 데이터가 저장되어 있는가?
- 칼럼의 의미는 무엇인가?\
⇒ 데이터를 추출하기 전에 데이터 웨어하우스에 데이터가 어떻게 저장되어 있는지 확인

**ERD**(엔터티 관계 다이어그램) : 데이터베이스 구조를 한눈에 알아보기 위해 사용(데이터가 저장된 형태를 알 수 있어)\
회사에 따라 ERD 없이 개발하는 경우도 있음

ERD가 없다면? 모든 데이터베이스를 직접 보면서 탐색하기
- 어떤 테이블이 존재하는가?
- 어떤 칼럼이 존재하는가? (+칼럼수)
- 다른 테이블과 **연결**할 때 어떤 칼럼을 사용하는가?
- 칼럼의 값들은 **어떤 의미**를 가지는가? (숫자로 되어 있는 경우 정의를 보지 않으면 알 수 없어ㅠ 회사마다 다름)

✅ 회사에 존재할 수 있는 데이터
1) 서비스에 사용될 데이터베이스
2) 앱/웹 로그 데이터 → 없는 회사도 있을 수 있음
     “과정”을 알 수 있는 데이터
3) 공공 데이터, 서드파티 데이터
     ex) 날씨, 페이스북 광고 데이터

- **서드파티 데이터
:** 기업이 직접 수집한 것이 아닌 외부 소스에서 제공되는 정보=데이터를 수집하는 기업과 수집되는 고객의 직접적인 관계없이 수집되는 데이터
- 제로(0)파티 데이터 : 기업이 주체가 되어 수집하는 데이터가 아닌 고객이 자발적, 적극적으로 제공하는 데이터
ex) 설문조사, 회원가입하며 남긴 개인정보
- 퍼스트(1)파티 데이터 : 데이터를 이용하는 기업이 자사의 플랫폼에서 직접 수집하는 데이터 → 주로 CRM 마케팅에 활용됨
- 세컨드(2)파티 데이터 : 내가 아닌, 다른 주체가 수집한(=다른 기업에서 수집한) 데이터 → 비용을 지불하여 데이터 구매 → 퍼스트파티 데이터 부족함 보완

## 💥📷강의 수강 인증샷📷💥
